<% @polls.each do |poll| %>
  <div>
    <td><%= poll.poll_text %></td>
    <button class="yea-button" id="poll_id_yea_<%= poll.id%>"> Yea </button>
    <button class="nay-button" id="poll_id_nay_<%= poll.id%>"> Nay </button>
    <br>
    <br>
  </div>
<% end %>

<script>
  
    var yeaPoll = function(poll_id){
      $.ajax({
              url: '/polls_users' ,
              type: 'POST',
              data: {
                  polls_user: {
                      poll_id: poll_id,
                      yea: true,
                      nay: false,
                  }
              },
              success: function(result)   {
                  $('#poll_id_yea_' + poll_id + '').toggleClass('yea-highlight')
              },
              error: function(err)    {
                  console.log(err);
              }
      }); 
  };

    var nayPoll = function(poll_id){
      $.ajax({
              url: '/polls_users' ,
              type: 'POST',
              data: {
                  polls_user: {
                      poll_id: poll_id,
                      nay: true,
                      yea: false,
                  }
              },
              success: function(result)   {
                $('#poll_id_nay_' + poll_id + '').toggleClass('nay-highlight')
              },
              error: function(err)    {
                  console.log(err);
              }
      }); 
  };

  $('.yea-button').click(function(e){
              e.preventDefault()

              var poll_id = (this.id.slice(12))
              console.log(poll_id);
              yeaPoll(poll_id);
    });

  $('.nay-button').click(function(e){
            e.preventDefault()

            var poll_id = (this.id.slice(12))
            console.log(poll_id);
            nayPoll(poll_id);
  });

</script>